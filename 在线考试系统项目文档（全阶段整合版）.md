# 在线考试系统项目文档（全阶段整合版）

## 一、规划阶段

### 1. 可行性研究报告

#### 1.1 技术可行性

本项目基于 JavaSE 开发，所涉及的 Socket 网络通信、多线程并发处理、IO 流文件操作以及对象序列化等技术，均为 JavaSE 体系内的基础且成熟的技术。这些技术无需复杂的外部依赖，开发人员只需具备 JavaSE 基础知识即可完成开发工作，整体开发难度适中，单人即可独立完成项目的全部开发任务。

#### 1.2 经济可行性

项目开发过程中，无需投入额外的硬件或软件成本。开发所需的 JDK 开发环境、IntelliJ IDEA 等集成开发工具均可免费获取，且系统可在本地运行环境中模拟多客户端同时在线的场景，无需额外的服务器资源，极大地降低了项目的经济成本。

#### 1.3 操作可行性

系统的操作流程设计简洁明了，主要流程为服务器启动→客户端连接→考生进行考试→提交答案。对于用户（考生）而言，只需掌握基础的键盘输入操作即可完成整个考试过程，学习成本低，操作便捷。

### 2. 项目计划书

#### 2.1 开发周期

项目整体开发周期预计为 6 天，具体时间分配如下：



*   需求分析：1 天

*   设计阶段：1 天

*   编码实现：3 天

*   测试阶段：1 天

#### 2.2 开发任务拆分



*   第 1 天：深入分析项目需求，明确系统功能边界和技术要点，完成核心类的设计工作。

*   第 2-4 天：集中精力实现服务器端和客户端的核心功能。服务器端重点实现多线程管理、试卷分发以及计时功能；客户端重点实现与服务器的连接、考生作答交互以及答案提交功能。

*   第 5 天：开发成绩存储模块，实现考生成绩的本地持久化；完善超时处理等附加功能，确保系统的完整性。

*   第 6 天：进行多客户端并发测试，模拟实际考试场景，发现并修复系统中存在的 Bug，优化系统性能。

#### 2.3 风险与应对



*   风险 1：网络延迟可能导致计时出现偏差。

    应对措施：采用客户端本地同步计时的方式，同时服务器端进行最终的时间校验，确保考试时间的准确性。

*   风险 2：文件传输过程中可能出现失败的情况。

    应对措施：在文件传输功能中增加重试机制，当检测到传输失败时，自动进行多次重试，提高文件传输的成功率。

## 二、需求分析阶段

本阶段已对系统需求进行细化，核心内容如下：

### 1. 服务器功能需求



*   多连接支持：能够同时接收多个客户端的连接请求，并为每个连接分配独立的处理资源。

*   试卷分发：从本地试卷库中选取合适的试卷，准确无误地发送给已连接的客户端。

*   答案处理：接收客户端提交的答案，对答案的完整性和有效性进行校验。

*   计时管理：精确记录考试时间，在考试剩余 30 分钟时向客户端发送提醒信息，对超时未提交答案的考生进行相应处理。

*   成绩存储：根据考生提交的答案生成成绩，并将考生信息、答案及成绩等数据进行本地存储。

### 2. 客户端功能需求



*   登录功能：考生输入姓名、学号等信息后，能够与服务器建立连接。

*   试卷接收：成功连接服务器后，能够接收服务器分发的试卷，并正确展示试卷内容。

*   作答功能：考生在规定的考试时间内，能够在客户端界面录入答案，并可对答案进行修改。

*   计时监听：实时监听考试剩余时间，接收并显示服务器发送的计时提醒信息。

*   退出限制：开始考试后，考生需提交答案后方可退出系统，防止误操作导致考试中断。

### 3. 非功能需求



*   可靠性：系统应具备一定的容错能力，在网络波动、客户端意外断开连接等情况下，能够保证数据的完整性和一致性，且重新连接后可继续进行考试。

*   安全性：确保试卷和答案在传输过程中的安全性，防止信息泄露；对考生提交的答案进行校验，防止恶意提交无关内容。

*   性能：在同时处理 10 个客户端连接的情况下，系统应保持良好的响应速度，试卷传输和答案提交的延迟应控制在合理范围内。

### 4. 技术需求



*   网络通信：采用 Socket 技术实现客户端与服务器之间的 TCP 通信。

*   并发处理：使用多线程技术处理多个客户端的并发连接，确保各客户端之间的操作互不干扰。

*   文件操作：通过 IO 流实现试卷的读取、答案的保存以及成绩的存储等文件操作。

*   对象传输：利用 Java 的序列化技术，实现考生信息、试卷、答案等对象在网络中的传输。

## 三、设计阶段

### 1. 概要设计文档

#### 1.1 系统架构

本系统采用客户端 - 服务器（C/S）架构，主要分为服务器端和客户端两个部分。服务器端负责管理客户端连接、分发试卷、处理答案、计时以及成绩管理等核心功能；客户端负责考生信息输入、试卷接收与展示、答案录入与提交以及接收服务器消息等交互功能。客户端与服务器端通过 Socket 进行通信，实现数据的双向传输。

#### 1.2 模块划分



| 模块    | 功能职责                                                        | 核心类 / 组件                      |
| ----- | ----------------------------------------------------------- | ----------------------------- |
| 服务器核心 | 监听客户端的连接请求，为每个客户端连接创建独立的线程进行处理，管理客户端线程的生命周期                 | `ExamServer`、`ClientHandler`  |
| 试卷管理  | 负责从本地存储中加载试卷，对试卷进行管理，并根据客户端的请求向其分发试卷                        | `PaperManager`                |
| 计时与判分 | 对考试时间进行精确计时，在考试剩余 30 分钟时触发提醒机制，判断考生是否超时交卷，并为有效提交答案的考生生成随机得分 | `TimerManager`、`ScoreManager` |
| 客户端核心 | 与服务器建立连接，负责客户端与服务器之间的数据收发，处理服务器发送的各种消息                      | `ExamClient`                  |
| 考生交互  | 提供用户交互界面，接收考生输入的个人信息，展示试卷内容，接收考生录入的答案                       | `UserInterface`               |
| 客户端计时 | 在客户端本地进行考试计时，实时显示剩余考试时间，监听并响应服务器发送的计时提醒                     | `ClientTimer`                 |

#### 1.3 数据流转

客户端发送考生信息→服务器对考生信息进行验证→验证通过后，服务器向客户端分发试卷→客户端接收试卷并展示给考生→考生在客户端作答后提交答案→服务器接收答案并进行判分→服务器将成绩返回给客户端→客户端显示考生成绩。

### 2. 详细设计文档

#### 2.1 核心类设计（含序列化类）



*   `Student`（考生信息类）：属性包括`name`（考生姓名）、`studentId`（学号），实现`Serializable`接口，用于在网络中传输考生信息。

*   `ExamPaper`（试卷类）：属性包括`paperId`（试卷 ID）、`questions`（题目列表）、`totalTime`（考试总时长，130 分钟），实现`Serializable`接口，便于试卷在网络中的传输和本地存储。

*   `AnswerSheet`（答案类）：属性包括`student`（考生信息）、`answers`（答案集合）、`submitTime`（提交时间），实现`Serializable`接口，用于封装考生提交的答案信息并进行网络传输。

*   `ExamServer`（服务器类）：主要方法有`startServer()`（启动服务器，开始监听端口）、`acceptClient()`（循环接收客户端的连接请求）。

*   `ClientHandler`（客户端处理线程）：每个客户端连接对应一个实例，主要方法有`sendPaper()`（向客户端发送试卷）、`receiveAnswer()`（接收客户端提交的答案）、`checkTimeout()`（检查考生是否超时交卷）。

*   `ExamClient`（客户端类）：主要方法有`connectServer()`（与服务器建立连接）、`sendStudentInfo()`（向服务器发送考生信息）、`receivePaper()`（接收服务器分发的试卷）、`submitAnswer()`（向服务器提交答案）。

*   `ClientTimer`（客户端计时类）：作为独立线程运行，主要方法有`startCountdown()`（开始倒计时）、`showRemainingTime()`（显示剩余考试时间）。

#### 2.2 关键流程设计



*   试卷分发流程：`PaperManager.loadPapers()`方法从`exams/`目录下加载序列化的试卷文件；`ClientHandler.sendPaper()`方法通过`ObjectOutputStream`将试卷对象发送给客户端；客户端的`ExamClient.receivePaper()`方法通过`ObjectInputStream`接收试卷对象，进行反序列化后展示给考生。

*   计时流程：服务器在向客户端发送试卷时，通过`TimerManager`记录`sendTime`（试卷发送时间）并启动计时；当考试时间剩余 30 分钟时，`TimerManager`调用`ClientHandler.sendReminder()`方法向客户端发送提醒信息；若考生超过 130 分钟未提交答案，`ScoreManager.setScore(0)`方法将该考生成绩设置为 0 分。

### 3. 数据存储设计



*   试卷存储：服务器的`exams/`目录下存放序列化的试卷文件（如`paper1.dat`），`PaperManager`通过`ObjectInputStream`读取这些文件，实现试卷的加载。

*   成绩存储：服务器的`scores/`目录下按 “学号\_姓名.txt” 的命名规则保存考生成绩文本文件。`ScoreManager.writeScore()`方法负责将考生信息、提交时间、得分及答案等内容写入文件，实现成绩的持久化存储。

## 四、测试阶段

### 1. 测试计划

#### 1.1 测试范围



*   功能测试：包括多客户端连接测试、试卷分发功能测试、答案提交功能测试、计时功能测试以及成绩存储功能测试等，确保系统各功能模块能够正常工作。

*   异常测试：模拟断网、考试超时、试卷或答案文件损坏等异常场景，测试系统的容错能力和异常处理机制。

#### 1.2 测试环境



*   开发环境：JDK 11、IntelliJ IDEA

*   操作系统：Windows 10

*   测试场景：模拟 10 个客户端同时连接服务器进行考试的场景

### 2. 测试用例



| 测试项     | 输入 / 操作                             | 预期结果                                                     |
| ------- | ----------------------------------- | -------------------------------------------------------- |
| 多客户端连接  | 同时启动 5 个客户端，分别输入不同的考生信息连接服务器        | 服务器能够成功接收所有客户端的连接请求，并为每个客户端创建独立的处理线程，每个客户端都能正常接收服务器分发的试卷 |
| 试卷分发完整性 | 客户端接收试卷后，将本地展示的试卷内容与服务器端存储的试卷内容进行比对 | 客户端展示的试卷内容与服务器端存储的试卷内容完全一致，包括题目、选项、分值等信息                 |
| 提前交卷计分  | 客户端在考试开始后 60 分钟内提交答案                | 服务器能够正常接收答案，并生成一个 0-100 分之间的随机得分，同时将考生信息、得分等内容正确写入成绩文件   |
| 超时处理    | 客户端在考试开始 130 分钟后仍未提交答案              | 服务器能够判断该考生超时，自动将其成绩判为 0 分，客户端能够接收到超时提示信息                 |
| 30 分钟提醒 | 当考试进行到 100 分钟时（剩余 30 分钟）            | 客户端能够收到服务器发送的 “距离考试结束还有 30 分钟，请尽快提交答案” 的提醒信息             |
| 断网重连    | 客户端连接服务器并接收试卷后，断开网络连接，5 秒后重新连接网络    | 客户端能够成功重新连接到服务器，且可以继续之前的考试作答，之前录入的答案不会丢失                 |

## 五、交付阶段

### 1. 用户手册

#### 1.1 服务器部署

将`exams/`目录（该目录下包含所有的试卷文件）与服务器程序放置在同一目录下。运行`ExamServer.main()`方法启动服务器，此时控制台将显示 “服务器启动，监听端口 8888”，表示服务器已成功启动并开始监听客户端的连接请求。

#### 1.2 客户端使用

运行`ExamClient.main()`方法启动客户端；在客户端界面输入考生姓名和学号；输入服务器的 IP 地址（默认值为`localhost`）和端口号（默认值为 8888）；连接成功后，客户端将接收服务器分发的试卷并展示；考生按照界面提示输入答案（如 “1.A,2.B”）；完成作答后，输入 “提交” 指令提交答案；客户端接收并显示服务器返回的成绩后，考生可关闭客户端程序。

#### 1.3 常见问题



*   连接失败：首先检查服务器是否已启动，若服务器已启动，再检查客户端输入的服务器 IP 地址和端口号是否正确。

*   试卷显示乱码：出现这种情况可能是试卷文件损坏，需确保`exams/`目录下的试卷文件完整且未被篡改。

### 2. 接口说明（内部交互）

服务器与客户端之间基于 TCP 协议进行通信，通过`ObjectInputStream`和`ObjectOutputStream`传输对象，具体的通信协议如下：



*   客户端向服务器传输的对象：`Student`（考生信息）、`AnswerSheet`（考生答案）。

*   服务器向客户端传输的对象：`ExamPaper`（试卷）、`String`（提醒信息）、`Integer`（考生成绩）。

## 六、维护阶段

### 1. 维护手册

#### 1.1 试卷更新

若需要添加新试卷，只需将新试卷进行序列化处理后，放入服务器的`exams/`目录下。服务器重启后，`PaperManager`会自动加载新添加的试卷，供客户端考试使用。

#### 1.2 日志查看

服务器的`logs/`目录下保存着系统运行的日志文件，包括客户端连接日志、试卷分发日志、答案提交日志等。例如，“2025-07-30 10:00: 客户端 2023001 连接成功”。通过查看这些日志文件，可以方便地排查系统运行过程中出现的异常问题。

#### 1.3 功能扩展

若需要增加主观题功能，可对`Question`类进行修改，添加`subjective`属性用于标识该题目是否为 subjective 题；同时，在`ScoreManager`中增加人工判分接口，以满足主观题的判分需求。

> （注：文档部分内容可能由 AI 生成）